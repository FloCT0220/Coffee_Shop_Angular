<!-- Desktop Cart (visible on screens >= 1024px) -->
<div class="container-fluid desktop-cart d-lg-block d-none">
  <div class="cart-header">
    <h2>Shopping Cart</h2>
    <button 
      class="clear-cart-btn" 
      (click)="clearCart()" 
      [disabled]="cartItems().length === 0">
      Clear Cart
    </button>
  </div>
  <div class="cart-content" *ngIf="cartItems().length > 0; else emptyCart">
    <!-- Cart Items -->
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of cartItems(); let i = index">
        <div class="item-info">
          <div class="item-image">
            <img [src]="isImagePath(item.drink.image) ? item.drink.image : '/images/noImage.jpg'" class="card-img-top" [alt]="item.drink.name">
          </div>
        </div>
        <div>
          <div class="item-details">
            <h4 class="item-name">{{ item.temperature }}    {{ item.drink.name }}<span class="item-category">{{ item.drink.category }}</span></h4>
          </div>
          <div>
            <p class="item-size">{{ getSizeLabel(item.size) }} - ${{ item.price.toFixed(2) }}</p>
          </div>
          <div class="item-controls">
            <div class="quantity-controls">
              <button 
                class="quantity-btn" 
                (click)="updateQuantity(i, item.quantity - 1)"
                [disabled]="item.quantity <= 1">
                -
              </button>
              <input 
                type="number" 
                class="quantity-input" 
                [value]="item.quantity" 
                (change)="updateQuantityFromInput(i, $event)"
                min="1"
                max="99">
              <button 
                class="quantity-btn" 
                (click)="updateQuantity(i, item.quantity + 1)">
                +
              </button>
            </div>
            

          </div>
        </div>
        <div class="item-total">
          ${{ getItemTotal(item).toFixed(2) }}
        </div>
        
        <button 
          class="remove-btn" 
          (click)="removeItem(i)"
          title="Remove item">
          Ã—
        </button>
      </div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary">
      <div class="summary-section">
        <h3>Order Summary</h3>
        
        <div class="summary-row">
          <span>Total Items:</span>
          <span>{{ cartSummary().totalItems }}</span>
        </div>
        
        <div class="summary-row category-total">
          <span>Coffee Total:</span>
          <span>${{ cartSummary().coffeeTotal.toFixed(2) }}</span>
        </div>
        
        <div class="summary-row category-total">
          <span>Tea Total:</span>
          <span>${{ cartSummary().teaTotal.toFixed(2) }}</span>
        </div>
        
        <div class="summary-row total-row">
          <span>Grand Total:</span>
          <span>${{ cartSummary().totalPrice.toFixed(2) }}</span>
        </div>
      </div>
    </div>
  </div>

  <ng-template #emptyCart>
    <div class="empty-cart">
      <div class="empty-cart-icon">ðŸ›’</div>
      <h3>Your cart is empty</h3>
      <p>Add some delicious drinks from our menu!</p>
    </div>
  </ng-template>
</div>

<!-- Mobile Cart Modal (visible on screens < 1024px) -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cartModalLabel">Shopping Cart</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="cart-content" *ngIf="cartItems().length > 0; else emptyCartModal">
          <!-- Cart Items -->
          <div class="cart-items">
            <div class="cart-item" *ngFor="let item of cartItems(); let i = index">
              <div class="item-info">
                <div class="item-image">
                  <img [src]="isImagePath(item.drink.image) ? item.drink.image : '/images/noImage.jpg'" class="card-img-top" [alt]="item.drink.name">
                </div>
              </div>
              <div>
                <div class="item-details">
                  <h4 class="item-name">{{ item.temperature }}    {{ item.drink.name }}<span class="item-category">{{ item.drink.category }}</span></h4>
                </div>
                <div>
                  <p class="item-size">{{ getSizeLabel(item.size) }} - ${{ item.price.toFixed(2) }}</p>
                </div>
                <div class="item-controls">
                  <div class="quantity-controls">
                    <button 
                      class="quantity-btn" 
                      (click)="updateQuantity(i, item.quantity - 1)"
                      [disabled]="item.quantity <= 1">
                      -
                    </button>
                    <input 
                      type="number" 
                      class="quantity-input" 
                      [value]="item.quantity" 
                      (change)="updateQuantityFromInput(i, $event)"
                      min="1"
                      max="99">
                    <button 
                      class="quantity-btn" 
                      (click)="updateQuantity(i, item.quantity + 1)">
                      +
                    </button>
                  </div>
                </div>
              </div>
              <div class="item-total">
                ${{ getItemTotal(item).toFixed(2) }}
              </div>
              
              <button 
                class="remove-btn" 
                (click)="removeItem(i)"
                title="Remove item">
                Ã—
              </button>
            </div>
          </div>

          <!-- Cart Summary -->
          <div class="cart-summary">
            <div class="summary-section">
              <h3>Order Summary</h3>
              
              <div class="summary-row">
                <span>Total Items:</span>
                <span>{{ cartSummary().totalItems }}</span>
              </div>
              
              <div class="summary-row category-total">
                <span>Coffee Total:</span>
                <span>${{ cartSummary().coffeeTotal.toFixed(2) }}</span>
              </div>
              
              <div class="summary-row category-total">
                <span>Tea Total:</span>
                <span>${{ cartSummary().teaTotal.toFixed(2) }}</span>
              </div>
              
              <div class="summary-row total-row">
                <span>Grand Total:</span>
                <span>${{ cartSummary().totalPrice.toFixed(2) }}</span>
              </div>
            </div>
          </div>
        </div>

        <ng-template #emptyCartModal>
          <div class="empty-cart">
            <div class="empty-cart-icon">ðŸ›’</div>
            <h3>Your cart is empty</h3>
            <p>Add some delicious drinks from our menu!</p>
          </div>
        </ng-template>
      </div>
      <div class="modal-footer">
        <button 
          type="button" 
          class="btn btn-danger clear-cart-btn" 
          (click)="clearCart()" 
          [disabled]="cartItems().length === 0">
          Clear Cart
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>