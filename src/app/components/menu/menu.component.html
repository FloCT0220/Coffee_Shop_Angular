<div class="container">
  <div class="menu-header">
    <h2>Our Menu</h2>
  </div>

  <!-- Menu Items -->
  <div class="d-flex flex-wrap gap-3 justify-content-center">
    <div class="card-group justify-content-center">
      <div class="" *ngFor="let drink of filteredDrinks">
        <div class="card menu-grid" style="width: 13rem;">
          <img [src]="isImagePath(drink.image) ? drink.image : '/images/noImage.jpg'" class="card-img-top" [alt]="drink.name">
          <div class="card-body">
            <h5 class="card-title">{{ drink.name }}</h5>
            <p class="card-text">{{ drink.description }}</p>
            <button class="btn btn-primary w-100" (click)="openModal(drink)">Buy</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <div class="modal fade" id="drinkDetailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <ng-container *ngIf="selectedDrink() as drink">
            <img [src]="isImagePath(drink.image) ? drink.image : '/images/noImage.jpg'" class="card-img-top" [alt]="drink.name">
          </ng-container>
        </div>
        <div class="modal-body">
          <ng-container *ngIf="selectedDrink() as drink">
            <h5 class="drink-name">{{ drink.name }}</h5>
            <p class="drink-description">{{ drink.description }}</p>
          </ng-container>
          <div class="d-flex justify-content-around flex-column">
            <div class="d-flex flex-column mb-3">
              <label class="form-label">Temperature:</label>
              <div class="dropdown">
                <button 
                  class="btn btn-outline-secondary dropdown-toggle" 
                  type="button" 
                  id="temperatureDropdown" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false">
                  {{ getLabel(selectedTemperature()) }}
                </button>
                <ul class="dropdown-menu" aria-labelledby="temperatureDropdown">
                  <li>
                    <a class="dropdown-item" 
                      href="#" 
                      (click)="onTemperatureClick('hot'); $event.preventDefault()">
                      Hot
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" 
                      href="#" 
                      (click)="onTemperatureClick('cold'); $event.preventDefault()">
                      Cold
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="d-flex flex-column mb-3">
              <label class="form-label">Size:</label>
              <div class="dropdown">
                <button 
                  class="btn btn-outline-secondary dropdown-toggle" 
                  type="button" 
                  id="sizeDropdown" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false">
                  {{ getLabel(selectedSize()) }}
                </button>
                <ul class="dropdown-menu" aria-labelledby="sizeDropdown">
                  <li *ngFor="let size of getAvailableSizes(selectedDrink())">
                    <a class="dropdown-item" 
                      href="#" 
                      (click)="onSizeClick(size); $event.preventDefault()">
                      {{ getLabel(size) }}
                    </a>
                  </li>
                </ul>
              </div>
            </div>  
                     <!-- Quantity Controls -->
          <div class="quantity-section mb-3">
            <label class="form-label">Quantity:</label>
            <div class="quantity-controls d-flex align-items-center justify-content-center">
              <button 
                class="btn btn-outline-secondary quantity-btn" 
                (click)="onQuantityChange(-1)"
                [disabled]="quantity() <= 1">
                -
              </button>
              <input 
                type="number" 
                class="quantity-input" 
                [value]="quantity()" 
                (change)="onQuantityInput($event)"
                min="1"
                max="99">
              <button 
                class="btn btn-outline-secondary quantity-btn" 
                (click)="onQuantityChange(1)">
                +
              </button>
            </div>
          </div>      
          </div>         
        </div>
        <div class="modal-footer">
          <ng-container *ngIf="selectedDrink() as drink">
            <span class="current-price">${{ (getPrice(drink) * quantity()).toFixed(2) }}</span>
          </ng-container>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" *ngIf="selectedDrink() as drink" (click)="addToCart(drink)">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>
  <div class="no-items" *ngIf="filteredDrinks.length === 0">
    <p>No drinks found matching your criteria.</p>
  </div>
</div>